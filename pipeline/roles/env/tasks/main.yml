---
- name: Set Environment variables
  become: yes
  lineinfile:
    path: /etc/environment
    regexp: \'"{{item}}"\'
    line: "{{ item }}"
    insertafter: EOF
    state: present
  with_items: 
    - export APP_PORT=3002
    - export MONGO_USER={{ mongo_user }}
    - MONGO_PASS={{ mongo_password }}
    - export MONGO_IP=localhost
    - export MONGO_PORT=27012

- name: Restart bashrc
  become: yes 
  shell: source /etc/environment
  args:
    executable: 
      /bin/bash

# - name: Display variable MONGO_IP
#   shell: echo $MONGO_IP
#   register: out

# - debug:
#     msg: "MONGO_IP: {{ out }}"

# - name: Display variable MONGO_PORT
#   shell: echo $MONGO_PORT
#   register: out

# - debug:
#     msg: "MONGO_PORT: {{ out }}"

# - name: Display variable APP_PORT
#   shell: echo $APP_PORT
#   register: out

# - debug:
#     msg: "APP_PORT: {{ out }}"

# - name: Display variable MONGO_PASS
#   shell: echo $MONGO_PASS
#   register: out

# - debug:
#     msg: "MONGO_PASS: {{ out }}"

# - name: Display variable MONGO_USER
#   shell: echo $MONGO_USER
#   register: out

# - debug:
#     msg: "MONGO_USER: {{ out }}"